# System Architecture Diagram

## ğŸ—ï¸ Application Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE                            â”‚
â”‚                     (React + Next UI + Tailwind)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                        â”‚                        â”‚
        â–¼                        â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PLATFORM   â”‚        â”‚     SHOP     â”‚        â”‚    ADMIN     â”‚
â”‚    PAGES     â”‚        â”‚    PAGES     â”‚        â”‚   DASHBOARD  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                       â”‚                       â”‚
â”œâ”€ Onboarding          â”œâ”€ Landing              â””â”€ Dashboard
â””â”€ (Create Shop)       â”œâ”€ CustomizeCake            (Protected)
                       â”œâ”€ Cart
                       â”œâ”€ Checkout
                       â””â”€ OrderTracking
        â”‚                        â”‚                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CONTEXT LAYER                              â”‚
â”‚                      (State Management)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ShopContext         â”‚  CartContext         â”‚  Auth Context      â”‚
â”‚  - shop data         â”‚  - cart items        â”‚  - user session    â”‚
â”‚  - shopId            â”‚  - add/remove        â”‚  - admin status    â”‚
â”‚  - loading state     â”‚  - total price       â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FIREBASE SERVICES                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Firestore           â”‚  Storage             â”‚  Authentication    â”‚
â”‚  - cakeShops/{id}    â”‚  - shops/{id}/logo   â”‚  - Admin login     â”‚
â”‚  - cakes             â”‚  - shops/{id}/cover  â”‚  - User sessions   â”‚
â”‚  - orders            â”‚                      â”‚                    â”‚
â”‚  - options           â”‚                      â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Diagrams

### Shop Creation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User at   â”‚
â”‚ /onboarding â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Fills form
       â”‚ Uploads images
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Onboarding  â”‚
â”‚  Component   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ handleSubmit()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Upload     â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚   Firebase   â”‚
â”‚   Images     â”‚       â”‚   Storage    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Get URLs
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Create    â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚  Firestore   â”‚
â”‚ Shop Documentâ”‚       â”‚  cakeShops/  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Create subcollections
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Generate   â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚  Firestore   â”‚
â”‚ Default Data â”‚       â”‚ cakes/optionsâ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ navigate()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /shop/{id}  â”‚
â”‚  (Storefront)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Customer Purchase Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User at   â”‚
â”‚ /shop/{id}  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Browse cakes
       â”‚ Click cake
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /shop/{id}/customize â”‚
â”‚      /{cakeId}        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Customize cake
       â”‚ Drag toppings
       â”‚ Select options
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Add to Cart â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚ CartContext  â”‚
â”‚              â”‚       â”‚ (localStorage)â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ navigate()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /shop/{id}/  â”‚
â”‚     cart     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Review items
       â”‚ Click checkout
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /shop/{id}/  â”‚
â”‚   checkout   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Fill form
       â”‚ Submit order
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create Order â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚  Firestore   â”‚
â”‚              â”‚       â”‚   orders/    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Get orderId
       â”‚ Clear cart
       â”‚ navigate()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /shop/{id}/  â”‚
â”‚track/{order} â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Order Tracking Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User at   â”‚
â”‚/shop/{id}/  â”‚
â”‚track/{order}â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ useParams()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚OrderTracking â”‚
â”‚  Component   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Fetch shop data
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   getDoc()   â”‚â—€â”€â”€â”€â”€â”€â”€â”‚  Firestore   â”‚
â”‚              â”‚       â”‚ cakeShops/   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Fetch order data
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   getDoc()   â”‚â—€â”€â”€â”€â”€â”€â”€â”‚  Firestore   â”‚
â”‚              â”‚       â”‚   orders/    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Display status
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Order Status â”‚
â”‚ Progress Bar â”‚
â”‚ Order Detailsâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ºï¸ Component Hierarchy

```
App (NextUIProvider â†’ ShopProvider â†’ CartProvider â†’ Router)
â”‚
â”œâ”€ Navbar
â”‚  â”œâ”€ NavbarBrand (Shop name/logo)
â”‚  â”œâ”€ NavbarContent (Navigation links)
â”‚  â””â”€ Cart Badge
â”‚
â””â”€ Routes
   â”‚
   â”œâ”€ /onboarding
   â”‚  â””â”€ Onboarding
   â”‚     â”œâ”€ Form inputs
   â”‚     â”œâ”€ File uploads
   â”‚     â””â”€ Submit button
   â”‚
   â”œâ”€ /dashboard
   â”‚  â””â”€ AdminDashboard
   â”‚     â”œâ”€ Auth check
   â”‚     â”œâ”€ Orders list
   â”‚     â””â”€ Shop settings
   â”‚
   â””â”€ /shop/:shopId
      â”‚
      â”œâ”€ (root)
      â”‚  â””â”€ Landing
      â”‚     â”œâ”€ Shop header
      â”‚     â”œâ”€ Cover image
      â”‚     â””â”€ Cakes grid
      â”‚        â””â”€ CakeCard (multiple)
      â”‚
      â”œâ”€ /customize/:cakeId
      â”‚  â””â”€ CustomizeCake
      â”‚     â”œâ”€ DndProvider
      â”‚     â”œâ”€ CakeCanvas
      â”‚     â”‚  â””â”€ Placed toppings
      â”‚     â”œâ”€ Options panel
      â”‚     â”‚  â”œâ”€ Base select
      â”‚     â”‚  â”œâ”€ Size select
      â”‚     â”‚  â””â”€ Toppings grid
      â”‚     â”‚     â””â”€ ToppingItem (multiple)
      â”‚     â””â”€ Price summary
      â”‚
      â”œâ”€ /cart
      â”‚  â””â”€ Cart
      â”‚     â”œâ”€ Cart items list
      â”‚     â”œâ”€ Total price
      â”‚     â””â”€ Checkout button
      â”‚
      â”œâ”€ /checkout
      â”‚  â””â”€ Checkout
      â”‚     â”œâ”€ Customer form
      â”‚     â”œâ”€ Delivery options
      â”‚     â””â”€ Submit button
      â”‚
      â””â”€ /track/:orderId
         â””â”€ OrderTracking
            â”œâ”€ Order status
            â”œâ”€ Progress bar
            â”œâ”€ Items list
            â””â”€ Contact info
```

---

## ğŸ” Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SECURITY LAYERS                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Public Access (No Auth Required)
â”œâ”€ /onboarding                    â†’ Create shop
â”œâ”€ /shop/:shopId                  â†’ View shop
â”œâ”€ /shop/:shopId/customize/:id    â†’ Customize cake
â”œâ”€ /shop/:shopId/cart             â†’ View cart
â”œâ”€ /shop/:shopId/checkout         â†’ Place order
â””â”€ /shop/:shopId/track/:orderId   â†’ Track order

Protected Access (Auth Required)
â””â”€ /dashboard                     â†’ Admin panel
   â””â”€ Firebase Auth check
      â””â”€ onAuthStateChanged()

Firestore Security Rules
â”œâ”€ cakeShops/{shopId}
â”‚  â”œâ”€ read: public              âœ…
â”‚  â””â”€ write: authenticated      ğŸ”’
â”‚
â”œâ”€ cakes/{cakeId}
â”‚  â”œâ”€ read: public              âœ…
â”‚  â””â”€ write: authenticated      ğŸ”’
â”‚
â”œâ”€ orders/{orderId}
â”‚  â”œâ”€ read: public              âœ…
â”‚  â”œâ”€ create: public            âœ…
â”‚  â””â”€ update/delete: auth       ğŸ”’
â”‚
â””â”€ options/{optionId}
   â”œâ”€ read: public              âœ…
   â””â”€ write: authenticated      ğŸ”’

Storage Security Rules
â””â”€ shops/{shopId}/*
   â”œâ”€ read: public              âœ…
   â””â”€ write: authenticated      ğŸ”’
```

---

## ğŸŒ Routing Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    URL STRUCTURE                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Platform Routes
â”œâ”€ /onboarding
â”‚  â””â”€ Purpose: Create new shop
â”‚  â””â”€ Access: Public
â”‚  â””â”€ Component: Onboarding.jsx
â”‚
â””â”€ /dashboard
   â””â”€ Purpose: Shop management
   â””â”€ Access: Protected (Firebase Auth)
   â””â”€ Component: AdminDashboard.jsx

Shop Routes (Multi-tenant)
/shop/:shopId/
â”œâ”€ (root)
â”‚  â””â”€ Purpose: Shop storefront
â”‚  â””â”€ Access: Public
â”‚  â””â”€ Component: Landing.jsx
â”‚
â”œâ”€ customize/:cakeId
â”‚  â””â”€ Purpose: Cake customization
â”‚  â””â”€ Access: Public
â”‚  â””â”€ Component: CustomizeCake.jsx
â”‚
â”œâ”€ cart
â”‚  â””â”€ Purpose: Shopping cart
â”‚  â””â”€ Access: Public
â”‚  â””â”€ Component: Cart.jsx
â”‚
â”œâ”€ checkout
â”‚  â””â”€ Purpose: Order placement
â”‚  â””â”€ Access: Public
â”‚  â””â”€ Component: Checkout.jsx
â”‚
â””â”€ track/:orderId
   â””â”€ Purpose: Order tracking
   â””â”€ Access: Public
   â””â”€ Component: OrderTracking.jsx

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ROUTE HELPERS                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

getShopId()
â”œâ”€ Extracts shopId from URL
â”œâ”€ Parses: /shop/:shopId/...
â””â”€ Returns: shopId or null

getRoutePath(path, shopId)
â”œâ”€ Builds shop-prefixed routes
â”œâ”€ Input: ("cart", "my-shop")
â””â”€ Output: "/shop/my-shop/cart"

ShopContext
â”œâ”€ Monitors URL changes (useLocation)
â”œâ”€ Fetches shop data from Firestore
â”œâ”€ Provides: { shop, shopId, loading, error }
â””â”€ Used by: All shop pages
```

---

## ğŸ“Š State Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CONTEXT PROVIDERS                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ShopContext
â”œâ”€ State:
â”‚  â”œâ”€ shop: { name, logo, colors, ... }
â”‚  â”œâ”€ shopId: "my-shop"
â”‚  â”œâ”€ loading: boolean
â”‚  â””â”€ error: string | null
â”‚
â”œâ”€ Data Source: Firestore (cakeShops/{shopId})
â”œâ”€ Update Trigger: URL change (useLocation)
â””â”€ Used By: All shop pages

CartContext
â”œâ”€ State:
â”‚  â””â”€ cartItems: [{ cakeName, shopId, price, ... }]
â”‚
â”œâ”€ Methods:
â”‚  â”œâ”€ addToCart(item)
â”‚  â”œâ”€ removeFromCart(itemId)
â”‚  â”œâ”€ clearCart()
â”‚  â””â”€ getTotalPrice()
â”‚
â”œâ”€ Persistence: localStorage ("cakeCart")
â””â”€ Used By: Landing, CustomizeCake, Cart, Checkout

AuthContext (Implicit - Firebase)
â”œâ”€ State:
â”‚  â””â”€ currentUser: User | null
â”‚
â”œâ”€ Methods:
â”‚  â”œâ”€ signInWithEmailAndPassword()
â”‚  â””â”€ signOut()
â”‚
â””â”€ Used By: AdminDashboard
```

---

## ğŸš€ Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DEPLOYMENT OPTIONS                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Option 1: Vercel
â”œâ”€ Build Command: npm run build
â”œâ”€ Output Directory: dist
â”œâ”€ Environment: Node.js 18+
â””â”€ Auto HTTPS âœ…

Option 2: Netlify
â”œâ”€ Build Command: npm run build
â”œâ”€ Publish Directory: dist
â”œâ”€ Redirects: _redirects file
â””â”€ Auto HTTPS âœ…

Option 3: Firebase Hosting
â”œâ”€ Build Command: npm run build
â”œâ”€ Public Directory: dist
â”œâ”€ Rewrite: Single-page app
â””â”€ Integrated with Firestore âœ…

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BUILD PROCESS                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

npm run build
    â”‚
    â”œâ”€ Vite bundles React app
    â”œâ”€ Tailwind processes CSS
    â”œâ”€ Next UI components bundled
    â”œâ”€ Code splitting enabled
    â””â”€ Output: dist/
       â”œâ”€ index.html
       â”œâ”€ assets/
       â”‚  â”œâ”€ index-[hash].js
       â”‚  â””â”€ index-[hash].css
       â””â”€ vite.svg
```

This visual architecture helps understand how all the pieces fit together!
